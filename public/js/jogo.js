var musicas = [
    {
        artista: "Charlie Brown Jr.",
        titulo: "Me Encontra",
        frase: [
            "Hoje eu vou sair para", "_____", "o amor",
            "Que espero há tanto tempo e ainda", "_____", "rolou",
            "O vento diz que é hoje em meio à", "_____", "",
            "Que eu vou encontrar a dona do meu", "_____", "",
            "Aí sempre sorrir e chorar",
            "E ter alguém pra", "_____", ""
        ],
        respostas: ["encontrar", "não", "multidão", "coração", "compartilhar"],
        imagem: "assets/img/discos/capa-charlieBrown.png"
    },
    {
        artista: "Charlie Brown Jr.",
        titulo: "Tamo Ai na Atividade",
        frase: [
            "Eu nasci", "_____", ",", "mas não nasci otário", "",
            "Eu é que não caio no conto do", "_____",
            "Eu tenho fé em Deus pra", "_____", "qualquer parada",
            "Chega com", "_____", "na minha quebrada",
            "Eu não vim pra me", "_____",
            "Eu vim pra", "_____"
        ],
        respostas: ["pobre", "vigário", "resolver", "respeito", "explicar", "confundir"],
        imagem: "assets/img/discos/capa-charlieBrown.png"
    },

    {
        artista: "Capital Inicial",
        titulo: "Todas as Noites",
        frase: [
            "Hoje à noite tudo pode", "_____", "",
            "Quem olhar nos olhos", "_____", "bares e sedução",
            "Num canto", "_____", "",
            "Pequenos goles de", "_____", "",
            "A noite esclarece o que o dia", "_____", ""
        ],
        respostas: ["acontecer", "vê", "escuro", "solidão", "escondeu"],
        imagem: "assets/img/discos/capa-capInicial.png"
    },
    {
        artista: "Charlie Brown Jr.",
        titulo: "Dias de luta, Dias de glória",
        frase: [
            "Na minha vida nem tudo", "_____", "",
            "Mas quanto mais a gente", "_____", "mais a gente", "_____",
            "Hoje estou", "_____", "porque eu sonhei com você", "",
            "E amanhã posso chorar por não poder te ver mais",
            "O seu sorriso vale mais que um", "_____", ""
        ],
        respostas: ["acontece", "rala", "cresce", "feliz", "diamante"],
        imagem: "assets/img/discos/capa-charlieBrown.png"
    },
    {
        artista: "Charlie Brown Jr.",
        titulo: "Vicios e Vitudes",
        frase: [
            "Eu nunca tive muito a ver com", "_____",
            "O livro que ela", "_____", "eu não li",
            "Eu nunca tive muito a ver com ela",
            "O filme que ela", "_____", "eu não vi",
            "Como chegar nela eu nem sei", "",
            "Ela é tão", "_____", "e eu aqui pichando muro",
            "Como", "_____", "nela eu nem sei",
            "Ela é tão diferente e eu igual a todo", "_____"
        ],
        respostas: ["ela", "ama", "adora", "interessante", "chegar", "mundo"],
        imagem: "assets/img/discos/capa-charlieBrown.png"
    },

    {
        artista: "Legião Urbana",
        titulo: "Tempo Perdido",
        frase: [
            "Todos os dias antes de", "_____", "",
            "Lembro e esqueço como foi o", "_____", "",
            "Sempre em", "_____", "",
            "Não temos tempo a perder",
            "Nosso suor", "_____", "",
            "É bem mais belo que esse sangue", "_____", ""
        ],
        respostas: ["dormir", "dia", "frente", "sagrado", "amargo"],
        imagem: "assets/img/discos/capa-legiaoUrbana.png"
    },
    {
        artista: "Legião Urbana",
        titulo: "Pais e Filhos",
        frase: [
            "Quero", "_____",
            "Vou", "_____", "de casa",
            "Posso dormir aqui com", "_____", "?",
            "Estou com medo",
            "Tive um", "_____",
            "Só vou voltar depois das", "_____", "",
            "Meu filho vai ter nome de", "_____",
            "Quero o", "_____", "mais bonito"
        ],
        respostas: ["colo", "fugir", "vocês", "pesadelo", "três", "santo", "nome"],
        imagem: "assets/img/discos/capa-legiaoUrbana.png"
    },
    {
        artista: "Legião Urbana",
        titulo: "Geração Coca-Cola",
        frase: [
            "Comercial e industrial", "",
            "Mas agora", "_____", "nossa vez",
            "Vamos cuspir de volta o lixo em", "_____", "de vocês", "",
            "Somos", "_____", "filhos da revolução",
            "Somos", "_____", "sem religião",
            "Somos o", "_____", "da nação",
            "Geração Coca-Cola"
        ],
        respostas: ["chegou", "cima", "os", "burgueses", "futuro"],
        imagem: "assets/img/discos/capa-legiaoUrbana.png"
    },

    {
        artista: "Engenheiros do Hawaii",
        titulo: "Era um garoto e como eu...",
        frase: [
            "Era um garoto que como eu", "_____", "os Beatles e os Rolling Stones",
            "Girava o mundo sempre a", "_____", "",
            "As coisas lindas da", "_____", "",
            "Não era belo, mas mesmo", "_____", "",
            "Havia mil garotas a", "_____", ""
        ],
        respostas: ["amava", "cantar", "américa", "assim", "fim"],
        imagem: "assets/img/discos/capa-engHawaii.png"
    },
    {
        artista: "Engenheiros do Hawaii",
        titulo: "Somos Quem Podemos Ser",
        frase: [
            "Um dia me", "_____",
            "Que as nuvens não eram de", "_____",
            "Um", "_____", "me disseram",
            "Que os ventos às vezes erram a direção",
            "E tudo ficou tão", "_____",
            "Um intervalo na", "_____",
            "Uma estrela de brilho raro",
            "Um disparo para um", "_____",
        ],
        respostas: ["disseram", "algodão", "dia", "claro", "escuridão", "coração"],
        imagem: "assets/img/discos/capa-engHawaii.png"
    },

    {
        artista: "Pitty",
        titulo: "Equalize",
        frase: [
            "Às vezes, se eu me", "_____", "",
            "Se eu não me vigio um", "_____", "",
            "Me transporto pra perto de", "_____", "",
            "Já vi que não posso ficar tão", "_____", "",
            "Me vem logo aquele", "_____", ""
        ],
        respostas: ["distraio", "instante", "você", "solta", "cheiro"],
        imagem: "assets/img/discos/capa-pitty.png"
    },

    {
        artista: "Rita Lee",
        titulo: "Lança Perfume",
        frase: [
            "Lança, menina, lança todo esse", "_____", "",
            "Desbaratina, não dá pra ficar", "_____", "",
            "Ao teu amor que tem cheiro de coisa", "_____", "",
            "Vem cá, meu bem, me descola um", "_____", "",
            "Eu sou neném, só sossego com", "_____", ""
        ],
        respostas: ["perfume", "imune", "maluca", "carinho", "beijinho"],
        imagem: "assets/img/discos/capa-ritalee.png"
    }
];


var musicaAtual = '';
var tempo = 60;
var timer = '';

function aleatorizar() {

    document.getElementById("texto-regras").style.display = "none";
    document.getElementById("container-jogo").style.display = "block";
    document.getElementById("box-imagem").style.display = "block";
    clearInterval(timer);
    tempo = 60; // **************************************************************************************
    temporizador.innerHTML = `Timer: ${tempo}s`;

    var indice = Math.floor(Math.random() * musicas.length);
    musicaAtual = musicas[indice];


    var campo = document.getElementById("campo-letra");
    campo.innerHTML = "";

    var idInput = 0;

    for (var i = 0; i < musicaAtual.frase.length; i++) {
        var parte = musicaAtual.frase[i];

        if (parte.includes("_____")) {
            campo.innerHTML += `<input type="text" id="resp${idInput}" 
        style="border: none; border-bottom: 2px solid #9c9c9cff; background:transparent; text-align: center; font-family: 'RookiePunk', sans-serif; letter-spacing: 3px; font-weigth: 300; font-size: 16px;"> `;
            idInput++;
        } else {
            campo.innerHTML += parte + " ";
        }
    }

    // troca a img
    document.getElementById("imagem-musica").src = musicaAtual.imagem;

    iniciarTimer();
}

function iniciarTimer() {

    timer = setInterval(function () {

        tempo--;
        temporizador.innerHTML = `Timer: ${tempo}s`;

        if (tempo <= 0) {
            clearInterval(timer);
            verificar();
        }

    }, 1000);
}

var porcentagem = 0;

function verificar() {

    clearInterval(timer); // para o cronômetro
    var acertos = 0;

    // p conferir oq foi escrito
    for (var i = 0; i < musicaAtual.respostas.length; i++) {

        var input = document.getElementById("resp" + i);
        var txt = input.value.toLowerCase().trim();

        if (txt === musicaAtual.respostas[i]) {
            input.style.color = "#00a100ff";
            acertos++;
        } else {
            input.style.color = "#921515ff";
        }
    }

    porcentagem = Math.round((acertos / musicaAtual.respostas.length) * 100);
    resultPartida();
    // alert("Você acertou " + porcentagem + "% da música!"); 

    //colocar uma media de pontuação por usuarios (sentido de competição - comparação)
}


function resultPartida() {
    //colocar um set interval tb
    var resultado = porcentagem;
    var imagem_ponto_baixo = `<img src="assets/img/imgJogo/card_resultado_0.png" alt="aaaaaaaaa"}">`;
    var imagem_ponto_medio = `<img src="assets/img/imgJogo/card_resultado_50.png" alt="${alert("Você acertou " + resultado + "% da música!")}">`;
    var imagem_ponto_alto = `<img src="assets/img/imgJogo/card_resultado_100.png" alt="${alert("Você acertou " + resultado + "% da música!")}"">`;

    if (resultado >= 0 && resultado <= 40) {

        document.getElementById("div_resultado").style.display = "block";
        div_resultado.innerHTML = `${imagem_ponto_baixo}`;

    } else if (resultado >= 41 && resultado <= 59) {

        document.getElementById("div_resultado").style.display = "block";
        div_resultado.innerHTML = `${imagem_ponto_medio}`;

    } else {

        document.getElementById("div_resultado").style.display = "block";
        div_resultado.innerHTML = `${imagem_ponto_alto}`;

    }
}


// criar uma associativa para o banco - musica respostas e artistas respostas
//adicionar tela para o usuario selecionar a quantidade de musicas que ele quer jogar

// adicionar uma funcão para que os campos fiquem disabled para dps que o timer acabar
// e pular para a proxima musica da partida.